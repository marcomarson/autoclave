
CREATE TABLE public.Sala (
                sala_id INTEGER NOT NULL,
                descricao VARCHAR(200),
                CONSTRAINT sala_pk PRIMARY KEY (sala_id)
);


CREATE SEQUENCE public.autoclave_autoclave_id_seq;

CREATE TABLE public.Autoclave (
                autoclave_id SMALLINT NOT NULL DEFAULT nextval('public.autoclave_autoclave_id_seq'),
                marca VARCHAR(50) NOT NULL,
                autoclave_inf_extra VARCHAR(200),
                manutencao BOOLEAN NOT NULL,
                CONSTRAINT autoclave_pk PRIMARY KEY (autoclave_id)
);


ALTER SEQUENCE public.autoclave_autoclave_id_seq OWNED BY public.Autoclave.autoclave_id;

CREATE SEQUENCE public.recadastro_recadastro_id_seq;

CREATE TABLE public.Recadastro (
                recadastro_id INTEGER NOT NULL DEFAULT nextval('public.recadastro_recadastro_id_seq'),
                autoclave_id SMALLINT NOT NULL,
                rodada SMALLINT DEFAULT 0 NOT NULL,
                CONSTRAINT recadastro_pk PRIMARY KEY (recadastro_id)
);


ALTER SEQUENCE public.recadastro_recadastro_id_seq OWNED BY public.Recadastro.recadastro_id;

CREATE SEQUENCE public.equipamentoodontologico_id_equipamento_seq;

CREATE TABLE public.EquipamentoOdontologico (
                equipamento_id SMALLINT NOT NULL DEFAULT nextval('public.equipamentoodontologico_id_equipamento_seq'),
                equipamento_nome VARCHAR NOT NULL,
                sala_id INTEGER NOT NULL,
                CONSTRAINT equipamentoodontologico_pk PRIMARY KEY (equipamento_id)
);


ALTER SEQUENCE public.equipamentoodontologico_id_equipamento_seq OWNED BY public.EquipamentoOdontologico.equipamento_id;

CREATE SEQUENCE public.pessoa_pessoa_id_seq;

CREATE TABLE public.Pessoa (
                pessoa_id INTEGER NOT NULL DEFAULT nextval('public.pessoa_pessoa_id_seq'),
                equipamentos_cadastrados SMALLINT,
                email VARCHAR(50),
                nome VARCHAR(60) NOT NULL,
                celular VARCHAR(15),
                CONSTRAINT pessoa_pk PRIMARY KEY (pessoa_id)
);


ALTER SEQUENCE public.pessoa_pessoa_id_seq OWNED BY public.Pessoa.pessoa_id;

CREATE SEQUENCE public.professor_professor_id_seq;

CREATE TABLE public.Professor (
                professor_id INTEGER NOT NULL DEFAULT nextval('public.professor_professor_id_seq'),
                pessoa_id INTEGER NOT NULL,
                departamento VARCHAR(25) NOT NULL,
                CONSTRAINT professor_pk PRIMARY KEY (professor_id)
);


ALTER SEQUENCE public.professor_professor_id_seq OWNED BY public.Professor.professor_id;

CREATE SEQUENCE public.aluno_aluno_id_seq;

CREATE TABLE public.Aluno (
                aluno_id INTEGER NOT NULL DEFAULT nextval('public.aluno_aluno_id_seq'),
                pessoa_id INTEGER NOT NULL,
                ra VARCHAR(8) NOT NULL,
                graduacao VARCHAR(100),
                CONSTRAINT aluno_pk PRIMARY KEY (aluno_id)
);


ALTER SEQUENCE public.aluno_aluno_id_seq OWNED BY public.Aluno.aluno_id;

CREATE SEQUENCE public.laboratorista_laboratorista_id_seq;

CREATE TABLE public.Laboratorista (
                laboratorista_id INTEGER NOT NULL DEFAULT nextval('public.laboratorista_laboratorista_id_seq'),
                pessoa_id INTEGER NOT NULL,
                turno VARCHAR NOT NULL,
                CONSTRAINT laboratorista_pk PRIMARY KEY (laboratorista_id)
);


ALTER SEQUENCE public.laboratorista_laboratorista_id_seq OWNED BY public.Laboratorista.laboratorista_id;

CREATE SEQUENCE public.esterilizacao_esterilizacao_id_seq;

CREATE TABLE public.Esterilizacao (
                esterilizacao_id INTEGER NOT NULL DEFAULT nextval('public.esterilizacao_esterilizacao_id_seq'),
                sala_id INTEGER NOT NULL,
                autoclave_id SMALLINT NOT NULL,
                equipamento_id SMALLINT,
                pessoa_id INTEGER,
                data_inicio TIMESTAMP NOT NULL,
                data_final TIMESTAMP,
                esterilizacao_inf_extra VARCHAR(200),
                recadastro_id INTEGER NOT NULL,
                CONSTRAINT esterilizacao_pk PRIMARY KEY (esterilizacao_id)
);


ALTER SEQUENCE public.esterilizacao_esterilizacao_id_seq OWNED BY public.Esterilizacao.esterilizacao_id;

ALTER TABLE public.Esterilizacao ADD CONSTRAINT sala_esterilizacao_fk
FOREIGN KEY (sala_id)
REFERENCES public.Sala (sala_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE public.EquipamentoOdontologico ADD CONSTRAINT sala_equipamentoodontologico_fk
FOREIGN KEY (sala_id)
REFERENCES public.Sala (sala_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE public.Esterilizacao ADD CONSTRAINT autoclave_esteriliza__o_fk
FOREIGN KEY (autoclave_id)
REFERENCES public.Autoclave (autoclave_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE public.Recadastro ADD CONSTRAINT autoclave_recadastro_fk
FOREIGN KEY (autoclave_id)
REFERENCES public.Autoclave (autoclave_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE public.Esterilizacao ADD CONSTRAINT esterilizacao_recadastro_fk
FOREIGN KEY (recadastro_id)
REFERENCES public.Recadastro (recadastro_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE public.Esterilizacao ADD CONSTRAINT equipamento_odontol_gico_esteriliza__o_fk
FOREIGN KEY (equipamento_id)
REFERENCES public.EquipamentoOdontologico (equipamento_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE public.Esterilizacao ADD CONSTRAINT pessoa_esteriliza__o_fk
FOREIGN KEY (pessoa_id)
REFERENCES public.Pessoa (pessoa_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE public.Laboratorista ADD CONSTRAINT laboratorista_pessoa_fk
FOREIGN KEY (pessoa_id)
REFERENCES public.Pessoa (pessoa_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE public.Aluno ADD CONSTRAINT aluno_pessoa_fk
FOREIGN KEY (pessoa_id)
REFERENCES public.Pessoa (pessoa_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE public.Professor ADD CONSTRAINT professor_pessoa_fk
FOREIGN KEY (pessoa_id)
REFERENCES public.Pessoa (pessoa_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;